:root {
  --progress-green: #27ae60;
  --progress-white: #fff;
  --progress-text: #333;
  --progress-step-duration: 0.65s; /* total duración (linea + box) */
}

/* ==============================
   Progressbar base
============================== */
.progressbar {
  display: flex;
  justify-content: space-between;
  counter-reset: step;
}

.progressbar li {
  list-style: none;
  position: relative;
  font-size: 9px;
  text-transform: uppercase;
  flex: 1;
  text-align: center;
  counter-increment: step;
  color: var(--progress-white);
}

/* ========= Línea ========= */
.progressbar li::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 2px;
  top: 10px;
  left: -50%;
  z-index: -1;
  background-image: linear-gradient(
      var(--progress-green),
      var(--progress-green)
    ),
    linear-gradient(var(--progress-white), var(--progress-white));
  background-repeat: no-repeat;
  background-position: left center;
  background-size: 0% 2px, 100% 2px; /* capa verde (0%), capa blanca (100%) */
}

.progressbar li:first-child::after {
  content: none;
}

/* ========= Caja con número ========= */
.progressbar li::before {
  content: counter(step);
  width: 20px;
  height: 20px;
  line-height: 20px;
  display: block;
  font-size: 10px;
  background: var(--progress-white);
  color: var(--progress-text);
  border-radius: 3px;
  margin: 0 auto 5px;
  transition: background 0.3s, color 0.3s;
}

/* ==============================
   Estados persistentes
============================== */
.progressbar li.active::before,
.progressbar li.completed::before {
  background: var(--progress-green);
  color: var(--progress-white);
}

.progressbar li.active::after,
.progressbar li.completed::after {
  background-size: 100% 2px, 100% 2px;
}

/* ==============================
   Animaciones transitorias
============================== */
.fill-step::after,
.fill-step::before,
.unfill-step::after,
.unfill-step::before {
  animation-duration: var(--progress-step-duration);
  animation-fill-mode: forwards;
}

/* Avance */
.fill-step::after {
  animation-name: fillStepLine;
}
.fill-step::before {
  animation-name: fillStepBox;
}

@keyframes fillStepLine {
  0% {
    background-size: 0% 2px, 100% 2px;
  }
  100% {
    background-size: 100% 2px, 100% 2px;
  }
}
@keyframes fillStepBox {
  0%,
  75% {
    background: var(--progress-white);
    color: var(--progress-text);
  }
  100% {
    background: var(--progress-green);
    color: var(--progress-white);
  }
}

/* Retroceso */
.unfill-step::before {
  animation-name: unfillStepBox;
}
.unfill-step::after {
  animation-name: unfillStepLine;
}

@keyframes unfillStepBox {
  0% {
    background: var(--progress-green);
    color: var(--progress-white);
  }
  100% {
    background: var(--progress-white);
    color: var(--progress-text);
  }
}
@keyframes unfillStepLine {
  0% {
    background-size: 100% 2px, 100% 2px;
  }
  100% {
    background-size: 0% 2px, 100% 2px;
  }
}
